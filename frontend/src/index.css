@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    /* Make light-mode borders slightly darker for better visibility */
    --border: 214 22% 85%;
    --input: 214 22% 85%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;
  }

  .dark {
    /* Slightly lighter dark theme for better contrast */
    --background: 222 47% 8%;
    --foreground: 210 40% 98%;
    --card: 222 47% 10%;
    --card-foreground: 210 40% 98%;
    --popover: 222 47% 8%;
    --popover-foreground: 210 40% 98%;
    --primary: 217.2 91.2% 59.8%;
    /* In dark mode, primary text should be light for contrast */
    --primary-foreground: 210 40% 98%;
    --secondary: 217 25% 22%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217 25% 22%;
    --muted-foreground: 215 20% 75%;
    --accent: 217 25% 22%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217 25% 22%;
    --input: 217 25% 22%;
    --ring: 224.3 76.3% 48%;
  }
}

/* Chat loader - circular dots animation */
.dots-loader {
  width: 60px;
  height: 60px;
  position: relative;
  margin: 0 auto;
}

.dots-loader .dot {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background-color: hsl(217.2 91.2% 70%);
  opacity: 0.3;
}

/* Position dots in a circle */
.dots-loader .dot:nth-child(1) { top: 0; left: 50%; transform: translateX(-50%); }
.dots-loader .dot:nth-child(2) { top: 15%; right: 15%; }
.dots-loader .dot:nth-child(3) { top: 50%; right: 0; transform: translateY(-50%); }
.dots-loader .dot:nth-child(4) { bottom: 15%; right: 15%; }
.dots-loader .dot:nth-child(5) { bottom: 0; left: 50%; transform: translateX(-50%); }
.dots-loader .dot:nth-child(6) { bottom: 15%; left: 15%; }
.dots-loader .dot:nth-child(7) { top: 50%; left: 0; transform: translateY(-50%); }
.dots-loader .dot:nth-child(8) { top: 15%; left: 15%; }

/* Animate dots in sequence */
.dots-loader .dot {
  animation: dot-pulse 1.6s infinite ease-in-out;
}

.dots-loader .dot:nth-child(1) { animation-delay: 0s; }
.dots-loader .dot:nth-child(2) { animation-delay: 0.2s; }
.dots-loader .dot:nth-child(3) { animation-delay: 0.4s; }
.dots-loader .dot:nth-child(4) { animation-delay: 0.6s; }
.dots-loader .dot:nth-child(5) { animation-delay: 0.8s; }
.dots-loader .dot:nth-child(6) { animation-delay: 1.0s; }
.dots-loader .dot:nth-child(7) { animation-delay: 1.2s; }
.dots-loader .dot:nth-child(8) { animation-delay: 1.4s; }

@keyframes dot-pulse {
  0%, 80%, 100% {
    opacity: 0.3;
    background-color: hsl(217.2 91.2% 70%);
    transform: scale(1);
  }
  40% {
    opacity: 1;
    background-color: hsl(217.2 91.2% 59.8%);
    transform: scale(1.2);
  }
}



/* Handoff shimmer: fade-in text when tokens begin */
.we-text-fade { animation: we-fade-in 120ms ease-out; }
@keyframes we-fade-in { from { opacity: 0 } to { opacity: 1 } }

/* Three-dot typing indicator for assistant bubble */
.we-typing { display: inline-flex; gap: 6px; align-items: center; height: 14px; }
.we-typing .dot { width: 6px; height: 6px; border-radius: 50%; background: hsl(217.2 91.2% 59.8%); opacity: .6; animation: we-bounce 1s infinite ease-in-out; }
.we-typing .dot:nth-child(2) { animation-delay: .12s; }
.we-typing .dot:nth-child(3) { animation-delay: .24s; }
@keyframes we-bounce {
  0%, 80%, 100% { transform: translateY(0); opacity: .5; }
  40% { transform: translateY(-4px); opacity: 1; }
}

/* Animated color tween for SVG stroke/fill icons */
.we-animated-stroke {
  color: #ef4444; /* red-500 */
  animation: we-color-shift 2.6s ease-in-out infinite;
}

@keyframes we-color-shift {
  0% { color: #ef4444; }
  50% { color: #3b82f6; }
  100% { color: #ef4444; }
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}
